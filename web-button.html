<!DOCTYPE html>
<html>
    <head>
        <title>Speech Recognizer</title>
    </head>

        <body>
            <h1>Speech Recognizer</h1>
            <button style= "background-color: red;" onclick="record_audio()">Record</button>
            <div id="output"></div> 
            <script>
                async function record_audio(){
                    try {
                        // Send a POST request to the Flask `/record` endpoint
                        const response = await fetch('/record', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                        });
                        const result = await response.json();
                
                        // Display the result in the 'output' div
                        const outputDiv = document.getElementById('output');
                        if (result.success) {
                            outputDiv.innerHTML = `<p>Transcription: ${result.transcription}</p>`;
                        } else {
                            outputDiv.innerHTML = `<p>Error: ${result.error}</p>`;
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        const outputDiv = document.getElementById('output');
                        outputDiv.innerHTML = `<p>Error: Unable to record audio.</p>`;
                    }
                }
            </script>
        
        </body>
</html>